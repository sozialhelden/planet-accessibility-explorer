(this["webpackJsonpplanet-accessibility-explorer"]=this["webpackJsonpplanet-accessibility-explorer"]||[]).push([[0],{183:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var r=n(109),i=n.n(r),s=n(83),o=n(0),a=n.n(o),c=n(20),l=n.n(c),d=n(117),u=n(243),h=n(241),p=n(242),b=n(12),j=n(42),f=(n(183),n(45)),m=n(36),O=n(5);function g(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}function y(e){var t=function(){var e=o.useState(g()),t=Object(m.a)(e,2),n=t[0],r=t[1],i=o.useCallback((function(e){r(g())}),[]);return o.useEffect((function(){void 0!==window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i)}),[i]),n}();return Object(O.jsx)("div",Object(f.a)(Object(f.a)({},e),{},{className:t?"".concat(e.className," bp3-dark"):e.className,children:e.children}))}var x=function(e,t){return e.reduce((function(e,t){var n=Object(m.a)(t,2),r=n[0],i=n[1];return Object(O.jsx)(r.Provider,{value:i,children:e})}),t)};var v=n(55),w=n.n(v),_=n(34),$=(n(204),n(118)),k=n(7),I=n(41),S=n(66);var L=n(69);function N(e){return Object(O.jsx)("li",{className:k.LIST_UNSTYLED,children:Object(O.jsx)("a",{rel:"noreferrer",target:"_blank",href:e.href,children:e.children})})}var D=n(110),M=n.n(D);function T(e){const{feature:t}=e;return Object(O.jsx)("address",{children:M()(Object(I.compact)(["street","housenumber","place","postcode","city","suburb","county","state","country"].map((e=>`addr:${e}`)).map((e=>t.properties[e]&&Object(O.jsx)("span",{children:t.properties[e]})))),Object(O.jsx)("span",{children:", "}))})}const E=new Set(["access","air_conditioning","automatic_door","bicycle","blind:description","blind","centralkey","changing_table","charge","cycleway","delivery","description:payment","diet","dispensing","door","drinking_water","emergency","entrance","fee","female","foot","gay","handrail","indoor","internet_access","lesbian","level","lgbtq","lit","male","min_age","opening_hours","outdoor_seating","payment","ramp","reservation","room","self_service","sidewalk","smoking","smoothness","step_count","stroller","surface","takeaway","toilet","toilets","unisex","wheelchair:description","wheelchair","winter_service"]);function C(e){return E.has(e)||E.has(e.substr(0,e.indexOf(":")))}const z=new Set(["addr"]);function F(e){return z.has(e)||z.has(e.substr(0,e.indexOf(":")))}const W=Object(j.a)("table")`
  background-color: rgba(0, 0, 0, 0.05);
  margin: 1rem 0;
`;function K(e){return Object(O.jsx)(W,{className:[k.HTML_TABLE,k.HTML_TABLE_STRIPED,k.HTML_TABLE_CONDENSED].join(" "),children:e.keys.map((t=>Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:t}),Object(O.jsx)("td",{children:e.feature.properties[t]})]},t)))})}const P=(e,t)=>fetch(e,t).then((e=>e.json()));function Y(){return Object(O.jsx)("div",{className:"bp3-skeleton",children:"Loading..."})}const Z=["type","name","area"];function G(e){const{featureId:t}=e,n=`https://osm-api.wheelmap.tech/api/v1/${t.source}/${t.id}.json`,{data:r,error:i}=Object(S.a)(n,P);if(i)return Object(O.jsx)(p.a,{intent:"danger",children:JSON.stringify(i)});if(!r)return Object(O.jsx)(Y,{});if(void 0!==r.error)return Object(O.jsx)(p.a,{intent:"danger",children:JSON.stringify(r)});const s=Object.keys(r.properties).sort().sort(((e,t)=>e.startsWith("name")?-1:t.startsWith("name")?1:0)).filter((e=>!Z.find((t=>e.startsWith(t))))),o=s.filter(C),a=s.filter(F),c=Object(I.difference)(s,o,a),l="Point"===r.geometry.type?"node":r._id.startsWith("-")?"relation":"way",d=r._id.replace(/^-/,""),u=function(e){const t=e.properties,n=t.name||t.loc_name||t.description||t.ref;if(n)return n}(r),h=function(e){const t=e.properties,n=["studio","office","shop","room","building","landuse"],r=["sport","leisure","tourism","shop","amenity","junction","highway","railway"];for(const i of n)if(t[i]&&"yes"!==t[i])return`${Object(L.humanize)(t[i])} ${i} ${t.ref||""}`;for(const i of n)if("yes"===t[i])return t.note||`${Object(L.humanize)(i)} ${t.ref||t.note||""}`;for(const i of r)if(t[i]&&"yes"!==t[i])return`${Object(L.humanize)(t[i])} ${t.ref||""}`}(r);return Object(O.jsxs)(p.b,{style:{gap:"10px",maxWidth:"40rem"},children:[Object(O.jsxs)("header",{children:[Object(O.jsx)(p.c,{children:u||h}),u&&h&&Object(O.jsx)("p",{style:{fontWeight:"bold"},children:h}),r.properties.description&&Object(O.jsx)("p",{children:r.properties.description}),Object(O.jsx)(T,{feature:r})]}),Object(O.jsx)(K,{keys:o,feature:r}),Object(O.jsxs)("details",{children:[Object(O.jsx)("summary",{children:"See OpenStreetMap information"}),Object(O.jsx)("h3",{children:"OSM tags"}),Object(O.jsx)(K,{keys:c,feature:r}),Object(O.jsxs)(p.e,{className:k.LIST_UNSTYLED,children:[Object(O.jsx)(N,{href:`https://openstreetmap.org/${l}/${d}`,children:"Open on OpenStreetMap"}),"relation"!==l&&Object(O.jsx)(N,{href:`https://wheelmap.org/nodes/${"way"===l?"-":""}${d}`,children:"Open on Wheelmap"}),Object(O.jsx)(N,{href:`https://www.openstreetmap.org/edit?${l}=${d}#map=19/${r.centroid.coordinates[1]}/${r.centroid.coordinates[0]}`,children:"Edit with ID Editor"}),Object(O.jsx)(N,{href:`https://osm-api.wheelmap.tech/api/v1/${t.source}/${t.id}.geojson`,children:"Show GeoJSON"})]})]})]})}function B(e){const{featureIds:t}=e,n=Object(O.jsx)(p.e,{className:k.LIST_UNSTYLED,children:t.map((e=>Object(O.jsx)("li",{className:k.LIST_UNSTYLED,children:Object(O.jsx)(G,{featureId:e})},`${e.source}/${e.id}`)))});return Object(O.jsx)(_.d,{latitude:e.latitude,longitude:e.longitude,closeButton:!0,closeOnClick:!1,onClose:e.onClose,anchor:"top",children:n})}var U,A=n(116),J=j.a.div(U||(U=Object(A.a)(["\n  overflow: auto;\n"]))),R=["admin","places","amenities","entrances_or_exits","elevators","ramps","pedestrian_highways","conveying","toilets","buildings","master_routes","master_route_members","routes","route_members","stop_areas","stop_area_members","platforms","stop_positions","stations"];var V=function(e,t){return fetch(e,t).then((function(e){return e.json()}))};var q=function(){var e="https://api.mapbox.com/styles/v1/".concat("sozialhelden","/").concat("ckwdrjpmz4jox16o7libit9p4","?fresh=true&access_token=").concat("pk.eyJ1Ijoic296aWFsaGVsZGVuIiwiYSI6ImNrd2Y1M3hoMDBiY3IyeG5zbzZ3ZXR6ZXIifQ.qQ8nPyopGZKyEM4DP5aKgA"),t=Object(S.a)(e,V),n=t.data,r=t.error;return r?{error:r}:n?{data:n}:{loading:!0}};function Q(){return o.useContext(_.b).map,null}function X(e){const[t,{width:n,height:r}]=Object($.a)(),i=Object(o.useRef)(null),[s,a]=Object(o.useState)({width:100,height:100,latitude:52.5,longitude:13.3,zoom:10});Object(o.useLayoutEffect)((()=>{const e={...s,width:n,height:r};a(e)}),[n,r]);const c=Object(b.d)(),l=Object(b.e)(),d=function(e){const t=e.pathname.match(/^\/(\w+)\/([\w,:-]+)/);let n=[];if(t&&"string"===typeof t[1]&&"string"===typeof t[2]){const e=t[2];n="composite"===t[1]?Object(I.uniq)(e.split(",").sort()).map((e=>{const[t,n]=e.split(":");return{source:t,id:n}})):[{source:t[1],id:e}]}return n}(l),u=new URLSearchParams(l.search),h=u.get("lat"),p=u.get("lon"),j=Object(o.useCallback)((e=>{var t,n;console.log(e);const r=null===e||void 0===e||null===(t=e.features)||void 0===t?void 0:t.length;if(r||c.push("/"),1!==r)c.push(`/composite/${null===(n=e.features)||void 0===n?void 0:n.map((e=>[e.source,e.properties.id].join(":"))).join(",")}?lon=${e.lngLat[0]}&lat=${e.lngLat[1]}`);else{var i;const t=null===(i=e.features)||void 0===i?void 0:i[0];t&&c.push(`/${t.source}/${t.properties.id}?lon=${e.lngLat[0]}&lat=${e.lngLat[1]}`)}}),[c]),m=Object(o.useCallback)((()=>{c.push("/")}),[c]),g=Object(o.useCallback)(((e,t)=>{a({...s,...e})}),[a,s]),y=q(),x=o.useMemo((()=>{var e,t;return(null===(e=y.data)||void 0===e?void 0:e.layers)&&function(e){return e.filter((function(e){var t;return null===(t=e.id)||void 0===t?void 0:t.startsWith("osm-")})).map((function(e){var t=R.find((function(t){var n;return null===(n=e["source-layer"])||void 0===n?void 0:n.startsWith(t)}));return Object(f.a)(Object(f.a)({},e),{},{source:t,"source-layer":"default"})})).filter((function(e){return e.source}))}(null===(t=y.data)||void 0===t?void 0:t.layers)}),[y]);return Object(O.jsxs)(J,{ref:t,className:e.className,style:{flex:1,display:!1===e.visible?"none":"block",position:"relative"},children:[Object(O.jsxs)(_.f,{...s,mapboxApiAccessToken:"pk.eyJ1Ijoic296aWFsaGVsZGVuIiwiYSI6ImNrd2Y1M3hoMDBiY3IyeG5zbzZ3ZXR6ZXIifQ.qQ8nPyopGZKyEM4DP5aKgA",onViewportChange:g,interactiveLayerIds:["osm-entrance-icon","osm-toilet","osm-surface-outline","osm-surface-fill","osm-poi-wheelchair-circle","osm-wheelchair-yes-label","osm-wheelchair-no-label","osm-wheelchair-limited-label","osm-pedestrian-highways-wheelchair-outline","osm-building-wheelchair-outline"],onClick:j,mapStyle:"mapbox://styles/mapbox/light-v10",ref:i,children:[R.map((e=>Object(O.jsx)(_.e,{type:"vector",tiles:[`https://osm-api.wheelmap.tech/api/v1/${e}.mvt?limit=10000&bbox={bbox-epsg-3857}&epsg=3857`],id:e},e))),null===x||void 0===x?void 0:x.map((e=>Object(O.jsx)(_.a,{...e},e.id))),h&&p&&d.length>0&&Object(O.jsx)(B,{featureIds:d,latitude:Number.parseFloat(h),longitude:Number.parseFloat(p),onClose:m}),Object(O.jsx)(Q,{}),Object(O.jsx)(_.c,{style:{right:"1rem",top:"1rem"}})]}),e.children]})}w.a.workerClass=n(231).default,u.a.onlyShowFocusOnTabs();const H=j.a.div`
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: row;
  align-items: stretch;
`;var ee=function(){const e=[],t=Object(b.d)(),n=Object(b.e)(),r=o.useCallback((e=>{const r=`/features/${e}`;t.push(`${r}${n.search}`)}),[t,n]),i=Object(O.jsx)(X,{featureId:void 0,onSelectFeature:r,visible:!0}),s=Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(H,{children:i})}),c=a.a.useMemo((function(){return[{combo:"mod+z",global:!0,label:"Undo",onKeyDown:function(){alert("!!")},allowInInput:!1,preventDefault:!0},{global:!0,combo:"mod+shift+z",label:"Redo",onKeyDown:function(){alert("!!")},allowInInput:!1,preventDefault:!0}]}),[]);return Object(O.jsx)(h.b,{children:Object(O.jsx)(p.d,{hotkeys:c,children:({handleKeyDown:t,handleKeyUp:n})=>Object(O.jsx)(y,{style:{height:"100%",display:"flex",flexDirection:"column"},onKeyDown:t,onKeyUp:n,children:x(e,s)})})})},te=(n(235),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,244)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),s(e),o(e)}))});i.a.config(),Object(s.a)(),Object(s.b)(),l.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(d.a,{basename:"/planet-accessibility-explorer",children:Object(O.jsx)(ee,{})})}),document.getElementById("root")),te()}},[[236,1,2]]]);
//# sourceMappingURL=main.c9d3d5e4.chunk.js.map