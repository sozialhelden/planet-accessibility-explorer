(this["webpackJsonpplanet-accessibility-explorer"]=this["webpackJsonpplanet-accessibility-explorer"]||[]).push([[0],{181:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){"use strict";n.r(t);var o=n(106),a=n.n(o),c=n(81),r=n(0),s=n.n(r),i=n(20),l=n.n(i),u=n(113),d=n(240),b=n(238),h=n(239),j=n(9),p=n(64),f=(n(181),n(43)),m=n(35),O=n(5);function v(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}function x(e){var t=function(){var e=r.useState(v()),t=Object(m.a)(e,2),n=t[0],o=t[1],a=r.useCallback((function(e){o(v())}),[]);return r.useEffect((function(){void 0!==window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a)}),[a]),n}();return Object(O.jsx)("div",Object(f.a)(Object(f.a)({},e),{},{className:t?"".concat(e.className," bp3-dark"):e.className,children:e.children}))}var g=function(e,t){return e.reduce((function(e,t){var n=Object(m.a)(t,2),o=n[0],a=n[1];return Object(O.jsx)(o.Provider,{value:a,children:e})}),t)};var y,w=n(53),I=n.n(w),k=n(37),C=(n(202),n(114)),M=n(107),D=p.a.div(y||(y=Object(M.a)(["\n  overflow: auto;\n"]))),F=n(65);const _=(e,t)=>fetch(e,t).then((e=>e.json()));function N(){return Object(O.jsx)("div",{className:"bp3-skeleton",children:"Loading..."})}function S(e){const{featureId:t}=e,n=`https://osm-api.wheelmap.tech/api/v1/${t.source}/${t.id}.json`,{data:o,error:a}=Object(F.a)(n,_);return a?Object(O.jsx)(h.a,{intent:"danger",children:JSON.stringify(a)}):o?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("header",{children:[t.source," / ",t.id]}),Object(O.jsx)("table",{children:Object.keys(o.properties).map((e=>Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:e}),Object(O.jsx)("td",{children:o.properties[e]})]},e)))})]}):Object(O.jsx)(N,{})}function $(e){const{featureIds:t}=e,n=Object(O.jsx)("ul",{children:t.map((e=>Object(O.jsx)("li",{children:Object(O.jsx)(S,{featureId:e})},`${e.source}/${e.id}`)))});return Object(O.jsx)(k.c,{latitude:e.latitude,longitude:e.longitude,closeButton:!0,closeOnClick:!1,onClose:e.onClose,anchor:"top",children:n})}var K=["admin","places","amenities","entrances_or_exits","elevators","ramps","pedestrian_highways","conveying","toilets","buildings","master_routes","master_route_members","routes","route_members","stop_areas","stop_area_members","platforms","stop_positions","stations"];var Z=function(e,t){return fetch(e,t).then((function(e){return e.json()}))};var z=function(){var e="https://api.mapbox.com/styles/v1/".concat("sozialhelden","/").concat("ckwdrjpmz4jox16o7libit9p4","?fresh=true&access_token=").concat("pk.eyJ1Ijoic296aWFsaGVsZGVuIiwiYSI6ImNrd2Y1M3hoMDBiY3IyeG5zbzZ3ZXR6ZXIifQ.qQ8nPyopGZKyEM4DP5aKgA"),t=Object(F.a)(e,Z),n=t.data,o=t.error;return o?{error:o}:n?{data:n}:{loading:!0}};function L(){return r.useContext(k.b).map,null}function G(e){const[t,{width:n,height:o}]=Object(C.a)(),a=Object(r.useRef)(null),[c,s]=Object(r.useState)({width:100,height:100,latitude:52.5,longitude:13.3,zoom:10});Object(r.useLayoutEffect)((()=>{const e={...c,width:n,height:o};s(e)}),[n,o]);const i=Object(j.d)(),l=Object(j.e)(),u=function(e){const t=e.pathname.match(/^\/(\w+)\/([\w:-]+)/);let n=[];if(t&&"string"===typeof t[1]&&"string"===typeof t[2]){const e=t[2];n="composite"===t[1]?e.split(",").sort().map((e=>{const[t,n]=e.split(":");return{source:t,id:n}})):[{source:t[1],id:e}]}return n}(l),d=new URLSearchParams(l.search),b=d.get("lat"),h=d.get("lon"),p=Object(r.useCallback)((e=>{var t;console.log(e),(null===e||void 0===e||null===(t=e.features)||void 0===t?void 0:t.length)?i.push(`/composite/${e.features.map((e=>[e.source,e.properties.id].join(":"))).join(",")}?lon=${e.lngLat[0]}&lat=${e.lngLat[1]}`):i.push("/")}),[i]),m=Object(r.useCallback)((()=>{i.push("/")}),[i]),v=Object(r.useCallback)(((e,t)=>{s({...c,...e})}),[s,c]),x=z(),g=r.useMemo((()=>{var e,t;return(null===(e=x.data)||void 0===e?void 0:e.layers)&&function(e){return e.filter((function(e){var t;return null===(t=e.id)||void 0===t?void 0:t.startsWith("osm-")})).map((function(e){var t=K.find((function(t){var n;return null===(n=e["source-layer"])||void 0===n?void 0:n.startsWith(t)}));return Object(f.a)(Object(f.a)({},e),{},{source:t,"source-layer":"default"})})).filter((function(e){return e.source}))}(null===(t=x.data)||void 0===t?void 0:t.layers)}),[x]);return Object(O.jsxs)(D,{ref:t,className:e.className,style:{flex:1,display:!1===e.visible?"none":"block",position:"relative"},children:[Object(O.jsxs)(k.e,{...c,mapboxApiAccessToken:"pk.eyJ1Ijoic296aWFsaGVsZGVuIiwiYSI6ImNrd2Y1M3hoMDBiY3IyeG5zbzZ3ZXR6ZXIifQ.qQ8nPyopGZKyEM4DP5aKgA",onViewportChange:v,interactiveLayerIds:["osm-entrance-icon","osm-toilet","osm-surface-outline","osm-surface-fill","osm-poi-wheelchair-circle","osm-wheelchair-yes-label","osm-wheelchair-no-label","osm-wheelchair-limited-label"],onClick:p,mapStyle:"mapbox://styles/mapbox/light-v10",ref:a,children:[K.map((e=>Object(O.jsx)(k.d,{type:"vector",tiles:[`https://osm-api.wheelmap.tech/api/v1/${e}.mvt?limit=10000&bbox={bbox-epsg-3857}&epsg=3857`],id:e},e))),null===g||void 0===g?void 0:g.map((e=>Object(O.jsx)(k.a,{...e},e.id))),b&&h&&u.length>0&&Object(O.jsx)($,{featureIds:u,latitude:Number.parseFloat(b),longitude:Number.parseFloat(h),onClose:m}),Object(O.jsx)(L,{})]}),e.children]})}I.a.workerClass=n(228).default,d.a.onlyShowFocusOnTabs();const P=p.a.div`
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: row;
  align-items: stretch;
`;var E=function(){const e=[],t=Object(j.d)(),n=Object(j.e)(),o=r.useCallback((e=>{const o=`/features/${e}`;t.push(`${o}${n.search}`)}),[t,n]),a=Object(O.jsx)(G,{featureId:void 0,onSelectFeature:o,visible:!0}),c=Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(P,{children:a})}),i=s.a.useMemo((function(){return[{combo:"mod+z",global:!0,label:"Undo",onKeyDown:function(){alert("!!")},allowInInput:!1,preventDefault:!0},{global:!0,combo:"mod+shift+z",label:"Redo",onKeyDown:function(){alert("!!")},allowInInput:!1,preventDefault:!0}]}),[]);return Object(O.jsx)(b.b,{children:Object(O.jsx)(h.b,{hotkeys:i,children:({handleKeyDown:t,handleKeyUp:n})=>Object(O.jsx)(x,{style:{height:"100%",display:"flex",flexDirection:"column"},onKeyDown:t,onKeyUp:n,children:g(e,c)})})})},Y=(n(232),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,241)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),o(e),a(e),c(e),r(e)}))});a.a.config(),Object(c.a)(),Object(c.b)(),l.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(u.a,{children:Object(O.jsx)(E,{})})}),document.getElementById("root")),Y()}},[[233,1,2]]]);
//# sourceMappingURL=main.84c7b419.chunk.js.map